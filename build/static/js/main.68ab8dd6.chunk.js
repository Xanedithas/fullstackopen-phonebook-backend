(this.webpackJsonpphonebook=this.webpackJsonpphonebook||[]).push([[0],{17:function(e,t,n){e.exports=n(41)},40:function(e,t,n){},41:function(e,t,n){"use strict";n.r(t);var a=n(0),r=n.n(a),c=n(16),o=n.n(c),u=n(6),l=n(3),i=n(2),s=n.n(i),m=n(4),d=n(5),f=n.n(d),p="/api/persons",h=function(){var e=Object(m.a)(s.a.mark((function e(){var t,n;return s.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=f.a.get(p),e.next=3,t;case 3:return n=e.sent,e.abrupt("return",n.data);case 5:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),b={create:function(){var e=Object(m.a)(s.a.mark((function e(t){var n,a;return s.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=f.a.post(p,t),e.next=3,n;case 3:return a=e.sent,e.abrupt("return",a.data);case 5:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),read:h,update:function(){var e=Object(m.a)(s.a.mark((function e(t,n){var a,r;return s.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a=f.a.put("".concat(p,"/").concat(t),n),e.next=3,a;case 3:return r=e.sent,e.abrupt("return",r.data);case 5:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}(),destroy:function(){var e=Object(m.a)(s.a.mark((function e(t){var n,a;return s.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=f.a.delete("".concat(p,"/").concat(t)),e.next=3,n;case 3:return a=e.sent,e.abrupt("return",a.data);case 5:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()},v=function(e){var t=e.notification;if(null===t||void 0===t)return null;var n={color:t.error?"red":t.success?"green":"gray"};return r.a.createElement("div",{style:n,className:"message"},t.message)},g=function(e){var t=e.contact,n=e.deleteHandler;return r.a.createElement("div",null,t.name," ",t.number," ",r.a.createElement("button",{onClick:n},"delete"))},E=function(e){var t=e.addHandler,n=Object(a.useState)(""),c=Object(l.a)(n,2),o=c[0],u=c[1],i=Object(a.useState)(""),s=Object(l.a)(i,2),m=s[0],d=s[1];return r.a.createElement("form",{onSubmit:function(e){e.preventDefault(),t({name:o.trim(),number:m.trim()}),u(""),d("")}},r.a.createElement("div",null,r.a.createElement("label",{name:"name"},"Name:"),r.a.createElement("input",{name:"name",value:o,onChange:function(e){return u(e.target.value)},autoComplete:"off"})),r.a.createElement("div",null,r.a.createElement("label",{name:"number"},"Number:"),r.a.createElement("input",{name:"number",value:m,onChange:function(e){return d(e.target.value)},autoComplete:"off"})),r.a.createElement("button",{type:"submit"},"add"))},w=function(e){var t=e.searchHandler,n=Object(a.useState)(""),c=Object(l.a)(n,2),o=c[0],u=c[1];return r.a.createElement("div",null,r.a.createElement("label",{name:"search"},"Search:"),r.a.createElement("input",{name:"search",value:o,onChange:function(e){return function(e){u(e.target.value),t(e.target.value)}(e)},autoComplete:"off"}))},j=function(){var e=Object(a.useState)(""),t=Object(l.a)(e,2),n=t[0],c=t[1],o=Object(a.useState)([]),i=Object(l.a)(o,2),s=i[0],m=i[1],d=Object(a.useState)(),f=Object(l.a)(d,2),p=f[0],h=f[1],j=function(e){h(e),setTimeout((function(){h(null)}),5e3)};Object(a.useEffect)((function(){b.read().then((function(e){m(e)})).catch((function(e){console.log(e),j({error:!0,message:"Could not read the phonebook. Please try again later."})}))}),[]);var k=function(e,t){window.confirm("".concat(e.name," is already added to the phonebook, would you like to replace the old number (").concat(e.number,") with the new number (").concat(t,") ?"))&&b.update(e.id,Object(u.a)(Object(u.a)({},e),{},{number:t})).then((function(t){m(s.map((function(n){return n.id!==e.id?n:t}))),j({success:!0,message:"".concat(e.name,"'s information is updated.")})})).catch((function(t){console.log(t),j({error:!0,message:"Could not update ".concat(e.name," in the phonebook. Please try again later.")})}))},O=s.filter((function(e){return e.name.toLowerCase().includes(n.toLowerCase())})).map((function(e){return r.a.createElement(g,{key:e.name,contact:e,deleteHandler:function(){return t=e,void(window.confirm("Delete ".concat(t.name," ?"))&&b.destroy(t.id).then((function(){m(s.filter((function(e){return e.id!==t.id}))),j({success:!0,message:"".concat(t.name," is removed from the phonebook.")})})).catch((function(e){console.log(e),j({error:!0,message:"Could not find ".concat(t.name," in the phonebook, perhaps it was already removed?")})})));var t}})}));return r.a.createElement("div",null,r.a.createElement("h1",null,"Phonebook"),r.a.createElement(v,{notification:p}),r.a.createElement("h2",null,"Add a new contact"),r.a.createElement(E,{addHandler:function(e){var t=s.filter((function(t){return t.name===e.name}));if(t.length)return k(t[0],e.number);b.create(e).then((function(t){m(s.concat(t)),j({success:!0,message:"".concat(e.name," is added to the phonebook.")})})).catch((function(t){console.log(t),j({error:!0,message:"".concat(e.name," could not be added to the phonebook. Please try again later.")})}))}}),r.a.createElement("h2",null,"Search for a contact"),r.a.createElement(w,{searchHandler:function(e){c(e)}}),r.a.createElement("h2",null,"Contacts"),O.length?O:"No contacts found")};n(40);o.a.render(r.a.createElement(j,null),document.getElementById("root"))}},[[17,1,2]]]);
//# sourceMappingURL=main.68ab8dd6.chunk.js.map